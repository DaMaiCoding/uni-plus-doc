# 脚手架相关面试题

## 1. 谈谈你对脚手架的理解？

背后意图：

- 了解求职者对脚手架的掌握程度

回答思路：

- 陈述脚手架的实现原理
- 陈述脚手架的开发流程
- 陈述你了解的脚手架和它们的用途
- 陈述脚手架的开发经验（粗浅）

脚手架的实现原理：

如果你能回答以下 **3** 个问题，就掌握了脚手架的实现原理：

- 为什么全局安装 `@vue/cli` 后会添加的命令为 `vue`？

```bash
npm install -g @vue/cli
```

因为 `vue-cli` 的源码中，有一个 `package.json` 文件，我们只要在其中的 `bin` 参数进行配置，即可实现

- 全局安装 `@vue/cli` 时发生了什么？

1. 会把我们指定的依赖下载到 `node_module` 目录下
2. 会去配置一个 `bin` 的软链接

- 执行 `vue` 命令时发生了什么？为什么 `vue` 指向一个 `js` 文件，我们却可以直接通过 `vue` 命令去执行它？

1. 会先去环境变量中，查找 `vue` 命令是否被注册
2. 如果有，根据环境变量的路径去执行文件

1. 因为 `js` 文件最上方添加了一个环境变量，这个环境变量通过固定的命令进行执行，这个 `js` 文件

模板回答：

以 `vue-cli` 为例，安装 `vue-cli` 的过程中，会去生成环境变量，指向 `node_module` 中的可执行文件，所以我们才可以通过 `vue` 命令来执行

`vue-cli` 之所以能够生成环境变量，是因为它的源码中，通过配置 `package.json` 中的 `bin` 参数进行实现

`vue` 命令，它之所以能够去执行文件，是因为可执行文件中，添加了一个环境变量去查找文件解释器（`node`）

陈述脚手架的开发经验（粗浅）：

我在公司做过 "项目创建脚手架"、"项目安装脚手架"、"项目测试脚手架"、"项目 CI/CD 脚手架"

在做这些脚手架过程中，我还深入的了解这些脚手架的实现原理，比如

1. 原理1
2. 原理2
3. 原理3

...

除了这个脚手架实现原理，我还清楚脚手架的开发流程

1. 创建 `npm` 项目
2. 创建脚手架入口文件，最上方添加

```shell
#!/usr/bin/env node
```

3. 配置 `package.json`，添加 `bin` 属性
4. 编写脚手架代码
5. 将脚手架发布到 `npm`

...

我还了解到常见的脚手架，像我们常见的npm、webpack（webpack-cli）、vue（vue-cli）、react 他们都提供了脚手架

比如，vue 就提供了两套脚手架，一套是用于创建项目的 vue-cli，另一套是用于运行项目的 vue-cli-service

## 2. 谈谈你开发过的脚手架？

背后意图：

- 进一步了解求职者对脚手架的实际经验

回答思路：

- 陈述脚手架的开发经验（详细）
  - 发现了什么业务问题
  - 提出了什么技术方案
  - 实现了什么业务结果
  - 沉淀了什么技术能力

回答模板：

我们公司大概有 5个前端，并且公司里面有30多个项目，我们一开始开发，负责新项目的前端有些是去拿以前的项目去改，

要么是去找若依框架去改、要么就是自己去 github 找一些已有的项目去改。

对此，我们提出为了让大家能够快速创建项目模板的一个解决方案，创建的这些模板是根据我们之前创建好的项目进行下载。

下载之后，我们还可以对下载后模板里面的内容进行定制。同事下载时可以选择不同的一个插件进行安装。

通过模板下载动态化的和渲染动态化，去实现项目模板下载成本的下降

我们这样的一套技术方案，让我们模板构建从原来的 1~2 天的时间，缩短到 2~1个小时，极大提高了开发效率

以后，甚至可以在这样的一个基础上，加入自动化版本日志，不仅能够清楚的知道，我们每个版本做过什么，

可以很快对后续可能出现的问题，进行快速定位。并且也有助于新同事更容易对项目上手。

## 3. 谈谈你开发脚手架过程中碰到的技术问题？

背后意图：

- 了解求助者开发脚手架过程中碰到的具体技术问题，以辨别经历是否属实，同时判断求职者的技术能力和等级

回答思路：

- 通过具体问题折射技术思考
  - 如何提高脚手架开发效率（多package 管理 + 脚手架通用框架封装）
  - 如何实现项目模板动态化（模板配置化 + 渲染动态化）
  - 如何实现 git-flow 流程自动化？（借助 Git API 实现 GitFlow 工作流）
  - 如何实现前端 CI/CD？（Github Actions / Jenkins + Docker）

思路模板：
